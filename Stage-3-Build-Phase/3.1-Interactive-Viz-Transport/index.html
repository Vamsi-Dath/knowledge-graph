<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Transit Analytics Dashboard</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bus Transit Analytics Dashboard</h1>
            <p>Interactive insights into bus delay patterns and performance metrics</p>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="total-routes">--</div>
                <div class="stat-label">Active Routes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avg-delay">--</div>
                <div class="stat-label">Avg Delay (min)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="worst-route">--</div>
                <div class="stat-label">Worst Route</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="on-time-rate">--</div>
                <div class="stat-label">On-Time Rate</div>
            </div>
        </div>

        <div class="controls-panel">
            <div class="controls-header">
                <div class="controls-title">Dashboard Filters</div>
                <button id="reset-filters" class="reset-btn" title="Reset all filters">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                        <path d="m3 3 2.5 5h5"/>
                    </svg>
                    Reset
                </button>
            </div>
            
            <div class="filter-presets">
                <button class="preset-btn" data-preset="peak-hours">Peak Hours</button>
                <button class="preset-btn" data-preset="bad-weather">Bad Weather</button>
                <button class="preset-btn" data-preset="weekend">Weekend</button>
            </div>

            <div class="filters-grid">
                <div class="filter-group">
                    <label for="day-filter">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                        Day of Week
                    </label>
                    <select id="day-filter">
                        <option value="all">All Days</option>
                        <option value="Mon">Monday</option>
                        <option value="Tue">Tuesday</option>
                        <option value="Wed">Wednesday</option>
                        <option value="Thu">Thursday</option>
                        <option value="Fri">Friday</option>
                        <option value="Sat">Saturday</option>
                        <option value="Sun">Sunday</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="weather-filter">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
                        </svg>
                        Weather
                    </label>
                    <select id="weather-filter">
                        <option value="all">All Weather</option>
                        <option value="sunny">‚òÄÔ∏è Sunny</option>
                        <option value="rainy">üåßÔ∏è Rainy</option>
                        <option value="snowy">‚ùÑÔ∏è Snowy</option>
                        <option value="cloudy">‚òÅÔ∏è Cloudy</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="time-filter">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12,6 12,12 16,14"/>
                        </svg>
                        Time Period
                    </label>
                    <select id="time-filter">
                        <option value="all">All Day</option>
                        <option value="morning">üåÖ Morning Rush (6-9 AM)</option>
                        <option value="midday">‚òÄÔ∏è Mid-day (9 AM-4 PM)</option>
                        <option value="evening">üåÜ Evening Rush (4-7 PM)</option>
                        <option value="night">üåô Evening (7 PM+)</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="route-filter">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"/>
                            <path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z"/>
                        </svg>
                        Route
                    </label>
                    <select id="route-filter">
                        <option value="all">All Routes</option>
                    </select>
                </div>
            </div>

            <div class="filter-status">
                <span id="filter-count">All data shown</span>
                <span id="data-count">0 records</span>
            </div>
        </div>

        <div class="dashboard-grid">
            <div id="map-chart" class="chart-container">
                <div class="chart-title">Route Network Map</div>
                <div class="chart-subtitle">Click on routes to see detailed analysis</div>
                <div id="map-loading" class="loading">Loading route map</div>
                <svg class="map-svg" id="map-svg"></svg>
            </div>

            <div id="bar-chart" class="chart-container">
                <div class="chart-title">Average Delays by Route</div>
                <div class="chart-subtitle">Click bars to filter other charts</div>
                <div class="loading">Loading chart data...</div>
                <svg class="chart-svg" id="bar-svg"></svg>
            </div>

            <div id="line-chart" class="chart-container">
                <div class="chart-title">Delay Trends Over Time</div>
                <div class="chart-subtitle">Shows selected route performance</div>
                <div class="loading">Loading trend data...</div>
                <svg class="chart-svg" id="line-svg"></svg>
            </div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>
    <script src="main.js"></script>
</body>
</html>
